(()=>{"use strict";const e=(e,t="success")=>{const r=document.getElementById("settings-toast");r&&(r.textContent=e,r.style.backgroundColor="success"===t?"#4CAF50":"#f44336",r.style.display="block",setTimeout((()=>{r.style.display="none"}),3e3))};document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("magic-kit-settings");if(!t)return;t.addEventListener("submit",(r=>{r.preventDefault();const n=new FormData(t),s=document.getElementById("magic_kit_nonce");if(!s)return void e("Security check failed","error");n.append("action","save_magic_kit_settings"),n.append("nonce",s.value);const o=new XMLHttpRequest;o.open("POST",window.ajaxurl),o.onload=function(){if(200===o.status)try{const t=JSON.parse(o.responseText);t&&t.success?e(t.data?.message||"Settings saved successfully!"):e(t.data?.message||"Error saving settings","error")}catch(t){e("Error processing response","error"),console.error("Magic Kit Parse Error:",t)}else e("Error saving settings","error"),console.error("Magic Kit XHR Error:",o.statusText)},o.onerror=function(){e("Network error occurred","error"),console.error("Magic Kit Network Error")},o.send(n)}));const r=document.querySelectorAll(".bulk-action-button");r.length&&r.forEach(((e,t)=>{e.addEventListener("click",(()=>{const e=document.querySelectorAll('input[type="checkbox"][name="magic_elements_enabled_widgets[]"]'),r=0===t;e.forEach((e=>{e.checked=r}))}))}))}))})();